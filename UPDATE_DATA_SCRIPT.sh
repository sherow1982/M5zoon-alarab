#!/bin/bash

# ================================================================
# EMIRATES GIFTS - DATA UPDATE SCRIPT
# ุชุญุฏูุซ ุจูุงูุงุช ุงูููุชุฌุงุช - ุฅุตูุงุญ ุงูููุชุฌุงุช ุงููุงูุตุฉ
# ================================================================
# 
# ุงููุดููุฉ: ุงููููุน ูุนุฑุถ 27 ููุชุฌ ููุท ูู 241 ููุชุฌ
# ุงูุญู: ุชุญุฏูุซ Build ูุชูุธูู Cache
#
# ================================================================

echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "๐ EMIRATES GIFTS - DATA UPDATE PROCESS"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"

# ุฎุทูุฉ 1: ุชุญุฏูุซ ูู GitHub
echo ""
echo "[1/5] ุชุญุฏูุซ ุงูุจูุงูุงุช ูู GitHub..."
git fetch origin
git pull origin main

if [ $? -eq 0 ]; then
    echo "โ ุชู ุชุญุฏูุซ ุงูุจูุงูุงุช ุจูุฌุงุญ"
else
    echo "โ ูุดู ุงูุชุญุฏูุซ ูู GitHub"
    exit 1
fi

# ุฎุทูุฉ 2: ุชุญุฏูุซ Dependencies
echo ""
echo "[2/5] ุชุญุฏูุซ ุงูููุชุจุงุช (npm)..."
npm install

if [ $? -eq 0 ]; then
    echo "โ ุชู ุชุญุฏูุซ ุงูููุชุจุงุช"
else
    echo "โ ูุดู ุชุญุฏูุซ ุงูููุชุจุงุช"
    exit 1
fi

# ุฎุทูุฉ 3: ุญุฐู Build ุงููุฏูู
echo ""
echo "[3/5] ุญุฐู Build ุงููุฏูู..."
rm -rf .next out dist build
echo "โ ุชู ุญุฐู ุงูุจูุงูุงุช ุงููุฎุฒูุฉ ูุคูุชุงู"

# ุฎุทูุฉ 4: ุจูุงุก ุงููุดุฑูุน
echo ""
echo "[4/5] ุจูุงุก ุงููุดุฑูุน ุงูุฌุฏูุฏ..."
npm run build

if [ $? -eq 0 ]; then
    echo "โ ุชู ุจูุงุก ุงููุดุฑูุน ุจูุฌุงุญ"
else
    echo "โ ูุดู ุจูุงุก ุงููุดุฑูุน"
    exit 1
fi

# ุฎุทูุฉ 5: ุชุดุบูู ุงููููุน
echo ""
echo "[5/5] ุชุดุบูู ุงููููุน..."
echo ""
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ ุชู ุงูุชุญุฏูุซ ุจูุฌุงุญ!"
echo ""
echo "๐ ุงููุชุงุฆุฌ ุงููุชููุนุฉ:"
echo "   โข 66 ุนุทุฑ"
echo "   โข 175 ุณุงุนุฉ"
echo "   โข ุฅุฌูุงูู: 241 ููุชุฌ"
echo ""
echo "๐ ุงูุชุญ ุงููููุน ูู ุงููุชุตูุญ:"
echo "   http://localhost:3000"
echo ""
echo "๐ก ูุตูุญุฉ: ุฅุฐุง ุฑุฃูุช 27 ููุชุฌ ููุท:"
echo "   1. ุงุถุบุท Ctrl+Shift+Delete ููุณุญ Cache"
echo "   2. ุฃุบูู ุงููุชุตูุญ ูุงูุชุญู ูู ุฌุฏูุฏ"
echo "   3. ุฌุฑุจ ูุชุตูุญ ูุฎุชูู"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"

npm start
